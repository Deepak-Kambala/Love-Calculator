<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#ff2e63">
  <title>Love Alchemy — Advanced Love Calculator 💘</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <main id="main-content" class="app" role="main">
    <div class="bg-ambience"></div>

    <header class="top">
      <div class="logo">
        <svg viewBox="0 0 24 24" class="logo-icon" aria-hidden="true">
          <path d="M12 21s-7-4.5-9.5-8.5S3.2 3.5 12 7c8.8-3.5 9.5 5.5 9.5 5.5S19 16.5 12 21z"/>
        </svg>
        <span>Love Alchemy</span>
      </div>

      <div class="controls">
        <button id="themeToggle" class="ghost-btn" title="Toggle theme" aria-label="Toggle dark/light mode">
          <span class="theme-icon">🌙</span>
          <span class="theme-text">Theme</span>
        </button>
        <button id="historyBtn" class="ghost-btn" title="View history">📜 History</button>
        <button id="resetBtn" class="ghost-btn" title="Reset inputs">🔁 Reset</button>
      </div>
    </header>

    <section class="card">
      <div class="left">
        <h1 class="title">✨ Love Calculator</h1>
        <p class="subtitle">A mix of numerology + a pinch of magic — same names give the same result.</p>

        <form id="loveForm" class="form" autocomplete="off" onsubmit="return false;" novalidate aria-describedby="form-instructions">
          <p id="form-instructions" class="sr-only">
            Enter two names to calculate love compatibility. Use tab to navigate between fields and space to toggle options.
          </p>
          
          <div class="inputs">
            <label class="input-wrap">
              <input id="name1" type="text" placeholder="Your name" aria-label="Your name" maxlength="40" required>
              <span class="label">You</span>
            </label>

            <label class="input-wrap">
              <input id="name2" type="text" placeholder="Their name" aria-label="Their name" maxlength="40" required>
              <span class="label">Crush</span>
            </label>
          </div>

          <div class="options">
            <label><input type="checkbox" id="allowJitter" aria-describedby="jitter-desc"> Allow small surprise (±5%)</label>
            <span id="jitter-desc" class="sr-only">Adds random variation to the result</span>
            
            <label><input type="checkbox" id="useMaster" checked aria-describedby="master-desc"> Support master numbers (11,22,33)</label>
            <span id="master-desc" class="sr-only">Preserves special numerology numbers</span>
          </div>

          <div class="actions">
            <button id="calcBtn" class="primary" aria-live="polite">
              <span class="btn-text">Calculate Love ❤️</span>
              <span class="loading-spinner hidden" aria-hidden="true">⏳</span>
            </button>
            <button id="shareBtn" class="outline" title="Share result">🔗 Share</button>
          </div>
        </form>

        <div id="liveRegion" aria-live="polite" aria-atomic="true" class="sr-only"></div>

        <div class="result-area" aria-live="polite" aria-relevant="additions text">
          <div class="ring-wrap" aria-hidden="true">
            <svg id="progressRing" class="progress-ring" width="160" height="160" viewBox="0 0 160 160">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0%" stop-color="#ff7a7a"/>
                  <stop offset="100%" stop-color="#ff2e63"/>
                </linearGradient>
              </defs>
              <circle class="ring-bg" cx="80" cy="80" r="64" stroke-width="14" fill="transparent" />
              <circle class="ring" cx="80" cy="80" r="64" stroke-width="14" fill="transparent" stroke="url(#g1)" stroke-linecap="round" stroke-dasharray="0 999"/>
              <text id="percentText" class="percent-text" x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">--%</text>
            </svg>
          </div>

          <div class="score-meta">
            <div id="heading" class="heading" role="heading" aria-level="2">Waiting for names...</div>
            <div id="description" class="description">Try entering your names and press Calculate.</div>
          </div>
        </div>

        <div class="extras">
          <button id="confettiToggle" class="ghost-btn">🎊 Confetti</button>
          <button id="soundToggle" class="ghost-btn">🔈 Sound</button>
        </div>
      </div>

      <div class="right">
        <div class="panel">
          <h3>How it works</h3>
          <ol>
            <li>We convert letters using <strong>Pythagorean numerology</strong>.</li>
            <li>We reduce to single digits (optionally keep master numbers).</li>
            <li>Combine numbers + apply modifiers to produce a compatibility %.</li>
            <li>We animate hearts, confetti & ring for a delightful reveal ✨</li>
          </ol>
        </div>

        <div class="panel">
          <h3>Tips</h3>
          <ul>
            <li>Same names → same result (unless jitter is allowed).</li>
            <li>Toggle confetti or sound for a surprise.</li>
            <li>You can share results via a short URL (copy to clipboard).</li>
          </ul>
        </div>

        <div class="panel history-panel hidden" id="historyPanel">
          <h3>History</h3>
          <div id="historyList" class="history-list"></div>
          <div class="history-actions">
            <button id="clearHistory" class="outline">Clear history</button>
          </div>
        </div>
      </div>
    </section>

    <canvas id="particleCanvas" class="particle-canvas" aria-hidden="true"></canvas>
    <audio id="chime" src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA..."></audio>
  </main>

  <footer class="footer">
    Made with ❤️ • Numerology logic (Pythagorean) • No data leaves your browser
  </footer>

  <script src="script.js"></script>
</body>
</html>